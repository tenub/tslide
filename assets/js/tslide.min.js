(function(e,t,n,r){function u(t,n){this.element=t;this.options=e.extend({},o,n);this._defaults=o;this._name=s;this.item=0;this.playing=1;this.init()}var i=n,s="tslide",o={legend:"on",maxwidth:800,easing:"swing",aduration:400,pduration:2e3,autoplay:"on"};u.prototype={init:function(){var t=this;var n="<div id='img-container'/>";e(this.element).append(this.generateImages(this.options.images)).find("img").wrapAll(n);if(this.options.legend==="on"){n="<div id='legend'/>";e(this.element).append(this.generateLegend(this.options.images)).find(".img-number").click(function(){t.item=e("#img-container").children(".active").index();if(t.item!==e(this).index()){t.play(0);t.move(t.item,e(this).index());t.updateIndex("#legend",e(this).index());t.updateIndex("#img-container",e(this).index());t.item=e("#img-container").children(".active").index();t.play(1)}}).wrapAll(n);e("#legend").children().eq(0).addClass("active");e("#img-container").children().eq(0).addClass("active")}this.setsize("#img-container > img:first-child","#img-container");this.setsize("#img-container","#slider");if(this.options.autoplay==="on"){t.play(1)}return this},generateImages:function(t){var n=[];for(var r=0;r<t.length;r++){n.push(e(i.createElement("img")).attr("src",this.options.dir+t[r]).attr("alt",t[r]))}return n},generateLegend:function(t){if(this.options.legend==="on"){var n=[];for(var r=0;r<t.length;r++){n.push(e("<div class='img-number'/>"))}return n}},setsize:function(t,n){var r=e(t);var i=e(n);var s=r.width();var o=r.height();var u=s/o;var a=r.innerWidth()-s;if(s>this.options.maxwidth){i.width(this.options.maxwidth+a);i.height(i.width()/u+a)}else{i.width(s+a);i.height(o+a)}},updateIndex:function(t,n){e(t).children().eq(n).addClass("active").siblings().removeClass("active")},play:function(e){var t=this;if(e){iv=setInterval(function(){if(t.item===t.options.images.length-1){t.updateIndex("#img-container",0);t.updateIndex("#legend",0);t.move(t.item,0);t.item=0}else{t.updateIndex("#img-container",t.item+1);t.updateIndex("#legend",t.item+1);t.move(t.item,t.item+1);t.item+=1}},t.options.pduration)}else{clearInterval(iv)}},move:function(t,n){e("#img-container > img").animate({right:"+="+100*(n-t)+"%"},this.options.aduration,this.options.easing)}};e.fn.tslide=function(t){return this.each(function(){if(!e.data(this,"plugin_"+s)){e.data(this,"plugin_"+s,new u(this,t))}})}})(jQuery,window,document)